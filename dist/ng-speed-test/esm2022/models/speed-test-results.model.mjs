export class SpeedTestResultsModel {
    constructor(fileSize) {
        this.fileSize = fileSize;
        this.duration = 0;
        this.hasEnded = false;
        this.startTime = null;
        this.endTime = null;
        this.speedBps = 0;
    }
    get speedKbps() {
        return this.speedBps / 1024;
    }
    get speedMbps() {
        return this.speedKbps / 1024;
    }
    _update() {
        if (this.endTime !== null && this.startTime !== null) {
            const milliseconds = this.endTime - this.startTime;
            if (milliseconds !== 0) {
                this.duration = milliseconds / 1000;
            }
            const bitsLoaded = this.fileSize * 8;
            this.speedBps = bitsLoaded / this.duration;
        }
    }
    end() {
        if (!this.hasEnded) {
            this.hasEnded = true;
            this.endTime = Date.now();
            this._update();
        }
    }
    error() {
        if (!this.hasEnded) {
            this.hasEnded = true;
            this.endTime = null;
            this._update();
        }
    }
    start() {
        this.startTime = Date.now();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BlZWQtdGVzdC1yZXN1bHRzLm1vZGVsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21vZGVscy9zcGVlZC10ZXN0LXJlc3VsdHMubW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBVUEsTUFBTSxPQUFPLHFCQUFxQjtJQU9oQyxZQUFvQixRQUFnQjtRQUFoQixhQUFRLEdBQVIsUUFBUSxDQUFRO1FBTjdCLGFBQVEsR0FBVyxDQUFDLENBQUM7UUFDckIsYUFBUSxHQUFZLEtBQUssQ0FBQztRQUMxQixjQUFTLEdBQWtCLElBQUksQ0FBQztRQUNoQyxZQUFPLEdBQWtCLElBQUksQ0FBQztRQUM5QixhQUFRLEdBQVcsQ0FBQyxDQUFDO0lBRVcsQ0FBQztJQUV4QyxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO0lBQzlCLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO0lBQy9CLENBQUM7SUFFTyxPQUFPO1FBQ2IsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLElBQUksSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLElBQUksRUFBRTtZQUNwRCxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDbkQsSUFBSSxZQUFZLEtBQUssQ0FBQyxFQUFFO2dCQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUM7YUFDckM7WUFFRCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztZQUNyQyxJQUFJLENBQUMsUUFBUSxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1NBQzVDO0lBQ0gsQ0FBQztJQUVELEdBQUc7UUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNsQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztZQUNyQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUMxQixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDaEI7SUFDSCxDQUFDO0lBRUQsS0FBSztRQUNILElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2xCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUNoQjtJQUNILENBQUM7SUFFRCxLQUFLO1FBQ0gsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDOUIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBTcGVlZFRlc3RSZXN1bHRzIHtcclxuICBkdXJhdGlvbjogbnVtYmVyO1xyXG4gIGhhc0VuZGVkOiBib29sZWFuO1xyXG4gIHN0YXJ0VGltZTogbnVtYmVyIHwgbnVsbDtcclxuICBlbmRUaW1lOiBudW1iZXIgfCBudWxsO1xyXG4gIHNwZWVkQnBzOiBudW1iZXI7XHJcbiAgc3BlZWRLYnBzOiBudW1iZXI7XHJcbiAgc3BlZWRNYnBzOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTcGVlZFRlc3RSZXN1bHRzTW9kZWwgaW1wbGVtZW50cyBTcGVlZFRlc3RSZXN1bHRzIHtcclxuICBwdWJsaWMgZHVyYXRpb246IG51bWJlciA9IDA7XHJcbiAgcHVibGljIGhhc0VuZGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHVibGljIHN0YXJ0VGltZTogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgcHVibGljIGVuZFRpbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG4gIHB1YmxpYyBzcGVlZEJwczogbnVtYmVyID0gMDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBmaWxlU2l6ZTogbnVtYmVyKSB7fVxyXG5cclxuICBnZXQgc3BlZWRLYnBzKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5zcGVlZEJwcyAvIDEwMjQ7XHJcbiAgfVxyXG5cclxuICBnZXQgc3BlZWRNYnBzKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5zcGVlZEticHMgLyAxMDI0O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuZW5kVGltZSAhPT0gbnVsbCAmJiB0aGlzLnN0YXJ0VGltZSAhPT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBtaWxsaXNlY29uZHMgPSB0aGlzLmVuZFRpbWUgLSB0aGlzLnN0YXJ0VGltZTtcclxuICAgICAgaWYgKG1pbGxpc2Vjb25kcyAhPT0gMCkge1xyXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBtaWxsaXNlY29uZHMgLyAxMDAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBiaXRzTG9hZGVkID0gdGhpcy5maWxlU2l6ZSAqIDg7XHJcbiAgICAgIHRoaXMuc3BlZWRCcHMgPSBiaXRzTG9hZGVkIC8gdGhpcy5kdXJhdGlvbjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVuZCgpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5oYXNFbmRlZCkge1xyXG4gICAgICB0aGlzLmhhc0VuZGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5lbmRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgdGhpcy5fdXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlcnJvcigpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5oYXNFbmRlZCkge1xyXG4gICAgICB0aGlzLmhhc0VuZGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5lbmRUaW1lID0gbnVsbDtcclxuICAgICAgdGhpcy5fdXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGFydCgpOiB2b2lkIHtcclxuICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICB9XHJcbn1cclxuIl19