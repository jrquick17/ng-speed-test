{"version":3,"file":"ng-speed-test.js","sources":["ng://ng-speed-test/app/services/speed-test.service.ts","ng://ng-speed-test/app/speed-test.module.ts","ng://ng-speed-test/ng-speed-test.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\n\nimport {Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n@Injectable()\nexport class SpeedTestService {\n  constructor() {\n\n  }\n\n  getBps():Observable<number> {\n    return new Observable(\n      (observer) => {\n        window.setTimeout(\n          () => {\n            const imageAddr = 'https://ng-speed-test.jrquick.com/assets/internet-speed-image.jpg';\n\n            let startTime, endTime;\n            const download = new Image();\n\n            download.onload = (a) => {\n              endTime = (new Date()).getTime();\n\n              const downloadSize = 4995374;\n\n              const duration = (endTime - startTime) / 1000;\n\n              const bitsLoaded = downloadSize * 8;\n\n              const speedBps = bitsLoaded / duration;\n\n              observer.next(speedBps);\n              observer.complete();\n            };\n\n            download.onerror = () => {\n              observer.next(-1);\n              observer.complete();\n            };\n\n            startTime = (new Date()).getTime();\n\n            const cacheBuster = '?nnn=' + startTime;\n            download.src = imageAddr + cacheBuster;\n          },\n          1\n        );\n      }\n    );\n  }\n\n  getKbps():Observable<number> {\n    return this.getBps().pipe(\n      map(\n        (bps) => {\n          return bps / 1024;\n        }\n      )\n    );\n  }\n\n  getMbps():Observable<number> {\n    return this.getKbps().pipe(\n      map(\n        (kpbs) => {\n          return kpbs / 1024;\n        }\n      )\n    );\n  }\n}\n","import {NgModule} from '@angular/core';\n\nimport {SpeedTestService} from './services/speed-test.service';\n\n@NgModule({\n  providers: [\n    SpeedTestService\n  ]\n})\nexport class SpeedTestModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './main';\n"],"names":[],"mappings":";;;;;IAMa,gBAAgB,GAA7B,MAAa,gBAAgB;IAC3B;KAEC;IAED,MAAM;QACJ,OAAO,IAAI,UAAU,CACnB,CAAC,QAAQ;YACP,MAAM,CAAC,UAAU,CACf;gBACE,MAAM,SAAS,GAAG,mEAAmE,CAAC;gBAEtF,IAAI,SAAS,EAAE,OAAO,CAAC;gBACvB,MAAM,QAAQ,GAAG,IAAI,KAAK,EAAE,CAAC;gBAE7B,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;oBAClB,OAAO,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC;oBAEjC,MAAM,YAAY,GAAG,OAAO,CAAC;oBAE7B,MAAM,QAAQ,GAAG,CAAC,OAAO,GAAG,SAAS,IAAI,IAAI,CAAC;oBAE9C,MAAM,UAAU,GAAG,YAAY,GAAG,CAAC,CAAC;oBAEpC,MAAM,QAAQ,GAAG,UAAU,GAAG,QAAQ,CAAC;oBAEvC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBACxB,QAAQ,CAAC,QAAQ,EAAE,CAAC;iBACrB,CAAC;gBAEF,QAAQ,CAAC,OAAO,GAAG;oBACjB,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;oBAClB,QAAQ,CAAC,QAAQ,EAAE,CAAC;iBACrB,CAAC;gBAEF,SAAS,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC;gBAEnC,MAAM,WAAW,GAAG,OAAO,GAAG,SAAS,CAAC;gBACxC,QAAQ,CAAC,GAAG,GAAG,SAAS,GAAG,WAAW,CAAC;aACxC,EACD,CAAC,CACF,CAAC;SACH,CACF,CAAC;KACH;IAED,OAAO;QACL,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CACvB,GAAG,CACD,CAAC,GAAG;YACF,OAAO,GAAG,GAAG,IAAI,CAAC;SACnB,CACF,CACF,CAAC;KACH;IAED,OAAO;QACL,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CACxB,GAAG,CACD,CAAC,IAAI;YACH,OAAO,IAAI,GAAG,IAAI,CAAC;SACpB,CACF,CACF,CAAC;KACH;CACF,CAAA;AAjEY,gBAAgB;IAD5B,UAAU,EAAE;GACA,gBAAgB,CAiE5B;;IC9DY,eAAe,GAA5B,MAAa,eAAe;CAAG,CAAA;AAAlB,eAAe;IAL3B,QAAQ,CAAC;QACR,SAAS,EAAE;YACT,gBAAgB;SACjB;KACF,CAAC;GACW,eAAe,CAAG;;ACT/B;;GAEG;;;;"}